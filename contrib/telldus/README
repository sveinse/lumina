Telldus - Wireless Smart Home Control
=====================================

    * http://www.telldus.se

The Telldus codebase can be found:

    * http://developer.telldus.se/browser
    * https://github.com/telldus/telldus  (mirror)
        $ git clone https://github.com/telldus/telldus.git

There is a descrption for Debian based installations:

    * http://developer.telldus.com/wiki/TellStickInstallationUbuntu

With a repo here (but its probably outdated).

    * http://download.telldus.com/debian/

Some old description in getting Telldus up on raspberry Pi:

    * https://lassesunix.wordpress.com/2013/08/12/installing-telldus-core-on-raspberry-pi/


How to build and install:
=========================

Please see the 'build' script which builds the debs. It contains many (but not all) of these
steps in an automatic script.

1. Download the original source distribution from the debian repo:

    * telldus-core_2.1.2-1.dsc
    * telldus-core_2.1.2.orig.tar.gz
    * telldus-core_2.1.2-1.debian.tar.gz

  How to fetch:
    $ sudo nano /etc/apt/sources.list.d/telldus.list
           deb-src http://download.telldus.com/debian/ stable main
    $ sudo wget -q http://download.telldus.se/debian/telldus-public.key -O- | apt-key add -
    $ sudo apt update
    $ apt source telldus

  (or head directly into http://download.telldus.com/debian/pool/stable/)

  See the telldus-core_*.dsc file for the hash-sums of the telldus-core_2.1.2.orig.tar,gz file.

  From what I can tell this repo is identical as commit 1f93cf in the upstream repos

  Two noteable changes are interesting and have been included in below patch
    * commit ed3ce3 upstream
    * commit 4401b1 in https://github.com/telldus/telldus/pull/8/commits/4401b10551cff09469c93dbc77db7360c05a8f57

2. Unpack and apply patch

   $ dpkg-source -x telldus-core_2.1.2-1.dsc
   $ cd telldus-core-2.1.2
   $ patch -p1 <../telldus-core_2.1.2-1sveinse1.diff

3. Install build dependencies

   $ sudo apt install build-essential debhelper cmake doxygen libconfuse-dev libftdi-dev help2man

4. Build package

   $ cd telldus-core-2.1.2
   $ dpkg-buildpackage -b -uc -us

5. Install package

   $ cd ..
   $ sudo dpkg -i libtelldus-core2_*.deb telldus-core_*.deb

6. Deploy telldus config

   $ sudo cp tellstick.conf /etc/tellstick.conf
   $ sudo service telldusd restart

7. Use/test

   $ tdtool --dimlevel 255 --dim 105

   or

   $ tdtool.py --dimlevel 255 --dim 105



How to build in a broot/docker setup
====================================

0. Setup broot. See ../broot/README

1. Build telldus using the broot build target:

   $ ../broot/run-docker rpi -- ./build -b build-rpi

2. Copy files to target machine

   $ scp build-rpi/*.deb USER@MACINE:PATH

3. Log into the server and install the packages

   $ sudo dpkg -i telldus-core_*.deb libtelldus-core2_*.deb
   $ sudo apt-get -f install
